@using VeterinarySystem.Core.Models.Procedure
@model ProcedureHistoryQueryModel
@{
	ViewData["Title"] = "Search";
}
<form method="get">
	<div class="row">
		<div class="form-group col-md-3">
			<div class="form-group">
				<label asp-for="Order"></label>
				<select asp-for="Order" class="form-control">
					<option value="0">Newset</option>
					<option value="1">Oldest</option>
				</select>
			</div>
		</div>
		<div class="col-md-3">
			<div class="form-group mt-4 p-2">
				<a class="btn btn-primary" href="@Url.Action("ProcedureHistory", "Procedure", new {  AnimalId = Model.AnimalId, Order = Model.Order, CurrentPage = Model.CurrentPage, AnimalName = Model.AnimalName })">Organise</a>
			</div>
		</div>
	</div>
</form>
@if (!Model.Procedures.Any())
{
	<h2 class="text-center">@Model.AnimalName has no prescriptions issiued yet.</h2>
}
else
{
	<div class="row">
		@foreach (ProcedureServiceModel procedure in Model.Procedures)
		{
			<partial name="_ProcedureHistoryPartial" model="@procedure" />
		}
	</div>
}


@if (Model.TotalProcedures > ProcedureHistoryQueryModel.ProceduresPerPage)
{
	<div class="row">
		@if (Model.CurrentPage > 1)
		{
			<a href="@Url.Action("ProcedureHistory", "Procedure", new {  AnimalId = Model.AnimalId, Order = Model.Order, CurrentPage =Model.CurrentPage - 1, AnimalName = Model.AnimalName })">Previous</a>
		}
		<span>Page @Model.CurrentPage</span>
		@if (Model.CurrentPage < Model.TotalPages)
		{
			<a href="@Url.Action("ProcedureHistory", "Procedure", new {  AnimalId = Model.AnimalId, Order = Model.Order, CurrentPage = Model.CurrentPage + 1,  AnimalName = Model.AnimalName })">Next</a>
		}
	</div>
}